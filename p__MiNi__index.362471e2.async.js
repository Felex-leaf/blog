"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[271],{17991:function(Q,C,t){t.r(C),t.d(C,{default:function(){return N}});var B=t(27424),K=t.n(B),b=t(36194),S=t(11382),O=t(67294),n=t(2212),F=t(69365),Z=t(1217),z=t(85893),s=null,l=null,f=null,m=null,o=null,H=function(x,v,g,w,y){var _=new b.ZP.Tween({x1:x.x,y1:x.y,z1:x.z,x2:v.x,y2:v.y,z2:v.z});_.to({x1:g.x,y1:g.y,z1:g.z,x2:w.x,y2:w.y,z2:w.z},2e3),_.onUpdate(function(c){!l||!o||(l.position.set(c.x1,c.y1,c.z1),o.target.x=c.x2,o.target.y=c.y2,o.target.z=c.z2,o.update())}),_.onComplete(function(){o&&(o.enabled=!0),y==null||y()}),_.easing(b.ZP.Easing.Cubic.InOut),_.start();var R=function c(){requestAnimationFrame(c),b.ZP.update()};R()},E=[{x:.8,y:1,z:.4,frame:1}],T=[],D={x:0,y:0,z:3},P={x:0,y:0,z:0};function N(){var j=(0,O.useRef)(null),x=(0,O.useState)(!0),v=K()(x,2),g=v[0],w=v[1],y=function p(){!f||!s||!l||(requestAnimationFrame(p),f.render(s,l))},_=function(i){var e=0,r={},u=["skymap","shache_occ","shache_nor","shache_col","neishi_occ","neishi_nor","mennei_col","luntai_nor","luntai_col","lungu_occ","lungu_nor","lungu_col","linjian_occ","linjian_nor","linjian_col","floor","deng_occ","deng_nor","deng_col","cheshen_occ","cheshen_nor","chejia_occ","chejia_nor","chedengzhao_nor"],L=function W(){var M,h=u[e];(M=m)===null||M===void 0||M.load("car3d/textures/".concat(h,".jpg"),function(d){if(e<u.length-1)r[h]=d,e+=1,W();else for(var k in i)if(Object.prototype.hasOwnProperty.call(i,k)){var a=i[k];switch(a.name){case"smart_lungu0":case"smart_lungu1":case"smart_lungu2":case"smart_lungu3":a.material=new n.Wid,a.material.map=r.lungu_col,a.material.normalMap=r.lungu_nor,a.material.aoMap=r.lungu_occ;break;case"smart_chelun0":case"smart_chelun1":case"smart_chelun2":case"smart_chelun3":a.material=new n.Wid,a.material.map=r.luntai_col,a.material.normalMap=r.luntai_nor;break;case"smart_boli":a.material=new n.xoR,a.material.color=new n.Ilk(3355443),a.material.transparent=!0,a.material.opacity=.2,a.material.envMap=r.skymap,a.material.envMap.mapping=n.dSO;break;case"smart_tianchuang":a.material=new n.xoR,a.material.color=new n.Ilk(0),a.material.transparent=!0,a.material.opacity=.5,a.material.envMap=r.skymap,a.material.envMap.mapping=n.dSO;break;case"smart_shachepan":a.material=new n.Wid,a.material.color=new n.Ilk(15921906),a.material.emissive=new n.Ilk(0),a.material.metalness=.5,a.material.roughness=.62,a.material.map=r.shache_col,a.material.normalMap=r.shache_nor,a.material.aoMap=r.shache_occ;break;case"smart_neishi":case"smart_neishi2":a.material=new n.xoR,a.material.color=new n.Ilk(3355443),a.material.emissive=new n.Ilk(0),a.material.normalMap=r.neishi_nor,a.material.aoMap=r.neishi_occ;break;case"smart_neibao":a.material=new n.xoR,a.material.color=new n.Ilk(3026478),a.material.map=r.mennei_col;break;case"smart_linjian":a.material=new n.Wid,a.material.color=new n.Ilk(3026478),a.material.metalness=.5,a.material.roughness=.62,a.material.map=r.linjian_col,a.material.normalMap=r.linjian_nor,a.material.aoMap=r.linjian_occ;break;case"smart_daochejing":a.material=new n.xoR,a.material.color=new n.Ilk(16777215);break;case"smart_bolinei":a.material=new n.xoR,a.material.color=new n.Ilk(3355443);break;case"smart_chedeng":case"smart_shachedeng":case"smart_wudeng":a.material=new n.Wid,a.material.color=new n.Ilk(16777215),a.material.emissive=new n.Ilk(3355443),a.material.metalness=1,a.material.roughness=.4,a.material.normalMap=r.deng_nor;break;case"smart_chedengzhao":a.material=new n.xoR,a.material.color=new n.Ilk(16777215),a.material.emissive=new n.Ilk(0),a.material.transparent=!0,a.material.opacity=.3,a.material.normalMap=r.chedengzhao_nor;break;case"smart_shachedengzhao":a.material=new n.xoR,a.material.color=new n.Ilk(13240342),a.material.transparent=!0,a.material.opacity=.4,a.material.normalMap=r.chedengzhao_nor;break;case"smart_shangeshang":a.material=new n.Wid,a.material.color=new n.Ilk(986895),a.material.emissive=new n.Ilk(0),a.material.metalness=1,a.material.roughness=0;break;case"smart_shangexia":a.material=new n.xoR,a.material.color=new n.Ilk(0),w(!1);break;case"smart_LOGO":case"smart_paiqiguan":a.material=new n.Wid,a.material.color=new n.Ilk(7105644),a.material.emissive=new n.Ilk(4473924),a.material.metalness=1,a.material.roughness=.32;break;case"smart_cheshen":a.material=new n.Wid,a.material.color=new n.Ilk(7365403),a.material.metalness=.44,a.material.roughness=0,a.material.normalMap=r.cheshen_nor,a.material.aoMap=r.cheshen_occ,a.material.envMap=r.skymap,a.material.envMap.mapping=n.dSO,a.material.envMapIntensity=1;break;case"smart_chejia":a.material=new n.Wid,a.material.color=new n.Ilk(2435369),a.material.metalness=.44,a.material.roughness=.4,a.material.normalMap=r.chejia_nor,a.material.aoMap=r.chejia_occ;break;default:}}})};L()},R=function(){if(s){var i=new n.Mig(14013909);i.intensity=1.2,s.add(i);var e=new n.Ox3;e.position.x=5,e.position.y=3,e.position.z=-5,e.intensity=.8,s.add(e);var r=new n.Ox3(16777215);r.position.x=-5,r.position.y=3,r.position.z=5,r.intensity=.8,s.add(r)}},c=function(){var i=new Z.E;i.load("car3d/model.gltf",function(e){s&&s.add(e.scene);var r=e.scene.children[0].children;_(r)},function(e){console.info("".concat(e.loaded/13970297*100,"% loaded")),e.loaded>=13970297&&console.info("end")},function(e){console.info(e),console.info("An error happened")})},G=function(){if(s){for(var i=new n.dpR().load("car3d/point.png"),e=new n.ZAu,r=new n.xeV({map:i,color:16777215,fog:!1}),u=0;u<E.length;u++){var L=E[u].x,W=E[u].y-.5,M=E[u].z,h=new n.jyi(r);h.scale.set(.15,.15,1),h.position.set(L,W,M),e.add(h),T.push(h)}s.add(e),document.body.addEventListener("click",function(d){if(d.preventDefault(),!!l){var k=new n.iMs,a=new n.FM8;a.x=d.clientX/window.innerWidth*2-1,a.y=-(d.clientY/window.innerHeight)*2+1,k.setFromCamera(a,l);var U=k.intersectObjects(T);if(U.length>0){var A=U[0].point,X=A.x,Y=A.y,J=A.z;D&&P&&H(D,P,{x:X+.1,y:Y-.1,z:J-.4},{x:1,y:.5,z:1.5})}}})}},V=function(){s=new n.xsS,l=new n.cPb(90,document.body.clientWidth/document.body.clientHeight,.1,100),f=new n.CP7,m=new n.dpR,l.position.set(0,0,3),f.setSize(document.body.clientWidth,document.body.clientHeight);var i=j.current;i&&i.appendChild(f.domElement),o=new F.z(l,f.domElement),o.addEventListener("change",function(){var e,r;D=(e=l)===null||e===void 0?void 0:e.position,P=(r=o)===null||r===void 0?void 0:r.target}),c(),y(),R(),G()};return(0,O.useEffect)(function(){V()},[]),(0,z.jsx)("div",{style:{position:"absolute",top:0,height:"100vh",width:"100vw",background:"rgba(0, 0, 0, .7)"},children:(0,z.jsx)(S.Z,{tip:"\u6A21\u578B\u52A0\u8F7D\u4E2D...",spinning:g,style:{height:"100vh"},children:(0,z.jsx)("div",{style:{position:"absolute",top:0,height:"100vh",width:"100vw"},ref:j})})})}}}]);
