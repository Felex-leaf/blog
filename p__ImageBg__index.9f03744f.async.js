"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[17],{8235:function(Y,x,t){t.d(x,{Z:function(){return i}});var U=t(42122),m=t.n(U),D=t(70215),T=t.n(D),p=t(94184),f=t.n(p),c=t(67294),O={button:"button___wWSxm"},F=t(85893),P=["children","style","className","theme"];function W(g){var A=(0,c.useRef)(null),I=g.children,Z=I===void 0?"\u786E\u8BA4":I,N=g.style,h=g.className,C=g.theme,$=T()(g,P),R=m()({},N);return(0,c.useEffect)(function(){if(C){var y=A.current;y&&y.style.setProperty("--theme-color--",C)}},[C]),(0,F.jsx)("div",m()(m()({},$),{},{className:f()([h,O.button]),style:R,ref:A,children:Z}))}var i=(0,c.memo)(W)},17943:function(Y,x,t){t.r(x),t.d(x,{default:function(){return I}});var U=t(17061),m=t.n(U),D=t(17156),T=t.n(D),p=t(27424),f=t.n(p),c=t(67294),O=t(80476),F=t(89325),P=t(24969),W=t(8235),i=t(85893),g;function A(){var Z=(0,c.useState)(""),N=f()(Z,2),h=N[0],C=N[1],$=(0,c.useState)(40),R=f()($,2),y=R[0],w=R[1],M=(0,c.useState)("white"),z=f()(M,2),j=z[0],k=z[1],q=(0,c.useState)(!1),J=f()(q,2),_=J[0],E=J[1],K=(0,c.useRef)(),ee=function(a,r){var e=document.createElement("canvas");return e.setAttribute("width",a==null?void 0:a.toString()),e.setAttribute("height",r==null?void 0:r.toString()),e.getContext("2d")},te=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=new Image;return a.startsWith("data")||(e.crossOrigin="Anonymous"),new Promise(function(n,l){e.onload=function(){var u=e.naturalWidth*r,v=e.naturalHeight*r,b=ee(u,v);b.drawImage(e,0,0,u,v);var s=b.getImageData(0,0,u,v),S=s.data;n({data:S,width:u,height:v})};var o=function(){return l(new Error("An error occurred attempting to load image"))};e.onerror=o,e.onabort=o,e.src=a})},L=function(a,r,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],l=a[r+3];if(l===0)return e;var o=Array.from(a.subarray(r,r+3));if(o.indexOf(void 0)!==-1)return e;var u=l&&l!==255?"rgba(".concat([].concat(o,[l]).join(","),")"):"rgb(".concat(o.join(","),")");return n.some(function(v){return u==null?void 0:u.includes(v)})||(e[u]?e[u].count+=1:e[u]={color:u,count:1}),e},Q=function(a,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=0;n<a.length;n+=4)L(a,n,r,e);return r},ae=function(a,r,e){for(var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:100,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],o={},u=a.slice(0,n*e*4),v=a.slice(((r-n)*e+1)*4),b=[],s=[],S=0;S<r-2*n;S+=1)for(var ue=n+S,X=ue*e,B=0;B<2*n;B+=1)if(B<n){var H=(X+B+1)*4;L(a.slice(H,H+3),0,o,l),b.push(H)}else{var G=(X+B+e-n)*4;L(a.slice(G,G+3),0,o,l),s.push(G)}Q(u,o,l),Q(v,o,l);var se=Object.values(o);return se.sort(function(oe,le){return le.count-oe.count})},V=function(){var d=T()(m()().mark(function a(r){var e,n,l,o,u,v;return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,r){s.next=3;break}return s.abrupt("return");case 3:return E(!0),s.next=6,te(r);case 6:if(n=s.sent,l=n.data,o=n.height,u=n.width,v=ae(l,o,u,y,["255,255,255","0,0,0"]),K.current){s.next=13;break}return s.abrupt("return");case 13:k((e=v[0])===null||e===void 0?void 0:e.color);case 14:return s.prev=14,E(!1),s.finish(14);case 17:case"end":return s.stop()}},a,null,[[0,,14,17]])}));return function(r){return d.apply(this,arguments)}}(),re=function(a){var r=URL.createObjectURL(new Blob([a]));return C(r),V(r),!1},ne=(0,i.jsxs)("div",{children:[(0,i.jsx)(P.Z,{}),(0,i.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,i.jsxs)("div",{ref:K,className:"image-bg",style:{backgroundColor:j},children:[(0,i.jsxs)("div",{style:{color:j},className:"image-bg-color",children:["\u80CC\u666F\u8272\uFF1A ",j]}),_&&(0,i.jsx)("span",{style:{color:j},className:"image-bg-loading",children:"\u80CC\u666F\u8272\u8BA1\u7B97\u4E2D..."}),(0,i.jsxs)("div",{className:"image-bg-control",children:[(0,i.jsx)(O.Z,{name:"avatar",listType:"picture-card",showUploadList:!1,beforeUpload:re,accept:".jpg,.png",children:h?(0,i.jsx)("img",{src:h,alt:"avatar",style:{width:"100%"}}):ne}),(0,i.jsx)(F.Z,{max:100,value:y,onChange:function(a){w(a)}}),(0,i.jsx)(W.Z,{theme:j,className:"image-bg-btn",onClick:function(){g&&(clearTimeout(g),g=null),E(!0),g=setTimeout(function(){V(h)},200)},children:"\u8C03\u6574\u80CC\u666F\u8272"})]})]})}var I=A}}]);
